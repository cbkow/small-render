{
    "_version": 1,
    "template_id": "blender-5.0-all-options",
    "name": "Blender 5.0 \u2014 All Options",

    "cmd": {
        "windows": "C:/Program Files/Blender Foundation/Blender 5.0/blender.exe",
        "linux": "/usr/bin/blender",
        "macos": "/Applications/Blender.app/Contents/MacOS/Blender",
        "label": "Blender Executable",
        "editable": true
    },

    "frame_padding": "####",

    "flags": [
        { "flag": "-b", "value": null, "info": "Background mode (no UI)", "editable": false },
        { "flag": "", "value": "", "id": "scene_file", "info": "Scene File (.blend)", "editable": true, "required": true, "type": "file", "filter": "blend" },
        { "flag": "-S", "value": null, "info": "Scene flag", "editable": false },
        { "flag": "", "value": "", "id": "scene_name", "editable": true, "info": "Scene Name (leave blank for default)",
          "help": "Name of the scene to render. Leave blank to use the active scene. Use -S help in Blender to list all scenes." },
        { "flag": "-o", "value": null, "info": "Output path flag", "editable": false },
        { "flag": "", "value": "", "id": "output_path", "info": "Output Path", "editable": true, "required": true, "type": "output",
          "default_pattern": "{project_dir}\\..\\renders\\{file_name}-{flag:scene_name}\\{file_name}-{flag:scene_name}_{frame_pad}" },
        { "flag": "-F", "value": null, "info": "Output format flag", "editable": false },
        { "flag": "", "value": "OPEN_EXR_MULTILAYER", "id": "output_format", "editable": true, "info": "Output Format",
          "help": "OPEN_EXR_MULTILAYER (preserves render passes, recommended) | OPEN_EXR | PNG | JPEG | TIFF | BMP | HDR | CINEON | DPX | JP2 | WEBP | TGA | RAWTGA" },
        { "flag": "-x", "value": null, "info": "Use extension flag", "editable": false },
        { "flag": "", "value": "", "id": "use_extension", "editable": true, "info": "File Extension",
          "help": "0 = no extension, 1 = add extension based on format. Leave blank to skip." },
        { "flag": "-E", "value": null, "info": "Render engine flag", "editable": false },
        { "flag": "", "value": "CYCLES", "id": "render_engine", "editable": true, "info": "Render Engine",
          "help": "CYCLES (GPU ray tracing) | BLENDER_EEVEE_NEXT (real-time) | BLENDER_WORKBENCH (viewport). Use -E help in Blender to list all available engines." },
        { "flag": "-t", "value": null, "info": "Threads flag", "editable": false },
        { "flag": "", "value": "", "id": "threads", "editable": true, "info": "Thread Count",
          "help": "Number of threads for rendering [1-1024]. 0 or blank = use all system processors. Leave blank to skip." },
        { "flag": "-j", "value": null, "info": "Frame jump flag", "editable": false },
        { "flag": "", "value": "", "id": "frame_jump", "editable": true, "info": "Frame Step",
          "help": "Render every Nth frame (e.g. 2 = every other frame). Leave blank to skip." },
        { "flag": "--python-exit-code", "value": null, "info": "Enable reliable exit codes", "editable": false },
        { "flag": "", "value": "1", "info": "Exit code on Python error", "editable": false },
        { "flag": "-P", "value": null, "info": "Python script flag", "editable": false },
        { "flag": "", "value": "", "id": "python_script", "editable": true, "info": "Python Script",
          "help": "Path to a Python script executed before rendering. Useful for custom setup. Leave blank to skip." },
        { "flag": "--python-expr", "value": null, "info": "Python expression flag", "editable": false },
        { "flag": "", "value": "", "id": "python_expr", "editable": true, "info": "Python Expression",
          "help": "Python expression executed before rendering. Useful for overriding settings, e.g. bpy.context.scene.cycles.samples = 256. Leave blank to skip." },
        { "flag": "-s", "value": null, "info": "Start frame flag", "editable": false },
        { "flag": "", "value": "{chunk_start}", "info": "Start frame (runtime)", "editable": false },
        { "flag": "-e", "value": null, "info": "End frame flag", "editable": false },
        { "flag": "", "value": "{chunk_end}", "info": "End frame (runtime)", "editable": false },
        { "flag": "-a", "value": null, "info": "Render animation (frame range)", "editable": false },
        { "flag": "--", "value": null, "info": "Separator for engine args", "editable": false },
        { "flag": "--cycles-device", "value": null, "info": "GPU device type flag", "editable": false },
        { "flag": "", "value": "OPTIX", "id": "cycles_device", "editable": true, "info": "Cycles GPU Device",
          "help": "OPTIX (NVIDIA RTX, recommended) | CUDA (NVIDIA) | HIP (AMD) | METAL (Apple) | ONEAPI (Intel Arc) | CPU. Append +CPU to render on both GPU and CPU (e.g. OPTIX+CPU)." }
    ],

    "job_defaults": {
        "frame_start": 1,
        "frame_end": 100,
        "chunk_size": 10,
        "priority": 50,
        "max_retries": 3,
        "timeout_seconds": null
    },

    "progress": {
        "patterns": [
            {
                "regex": "Rendering (\\d+)\\s*/\\s*(\\d+) samples",
                "type": "fraction",
                "numerator_group": 1,
                "denominator_group": 2,
                "info": "Cycles sample progress (Blender 3.0+)"
            },
            {
                "regex": "Rendered?\\s+(\\d+)/(\\d+)\\s+Tiles",
                "type": "fraction",
                "numerator_group": 1,
                "denominator_group": 2,
                "info": "Cycles tile progress (legacy)"
            }
        ],
        "completion_pattern": {
            "regex": "Saved: '?(.+)'?",
            "info": "Blender logs 'Saved:' when a frame is written to disk"
        },
        "error_patterns": [
            { "regex": "CUDA error.*", "info": "CUDA GPU failure" },
            { "regex": "OptiX error.*", "info": "OptiX GPU failure" },
            { "regex": "HIP error.*", "info": "HIP GPU failure (AMD)" },
            { "regex": "Metal error.*", "info": "Metal GPU failure (Apple)" },
            { "regex": "Malloc returned null.*", "info": "Out of memory" },
            { "regex": "Unable to open.*", "info": "File not found" },
            { "regex": "Failed to read blend file.*", "info": "Corrupt .blend file" },
            { "regex": "Unable to create directory.*", "info": "Output directory inaccessible" },
            { "regex": "Error: Cannot read file.*", "info": "Missing linked file or asset" },
            { "regex": "Error: Python.*", "info": "Python script error" }
        ]
    },

    "output_detection": {
        "stdout_regex": "Saved: '?(.+\\.[a-zA-Z0-9]+)'?",
        "path_group": 1,
        "validation": "exists_nonzero",
        "info": "Blender prints 'Saved: <path>' after writing each frame"
    },

    "process": {
        "kill_method": "terminate",
        "working_dir": null
    },

    "environment": {},

    "tags_required": ["blend"]
}
